<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sinh nh·∫≠t Linh (Sinn)</title>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #ffe6f0;
      font-family: 'Patrick Hand', cursive;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    .title-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      margin-top: 0;
      margin-bottom: 0;
      z-index: 2;
    }
    h1 {
      font-size: clamp(2rem, 5vw, 3rem);
      color: #d6336c;
      margin: 0;
      text-shadow: 1px 1px 2px #fff;
      text-align: center;
      user-select: none;
    }
    .birthday-date-row {
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      z-index: 2;
    }
    #birthday-date {
      color: #d6336c;
      font-size: 1.2rem;
      font-family: 'Patrick Hand', cursive;
      text-align: center;
      user-select: none;
      margin: 0;
      vertical-align: middle;
    }
    /* H·ªôp qu√† */
    #gift-icon {
      width: 32px;
      height: 32px;
      cursor: pointer;
      user-select: none;
      transition: transform 0.15s;
      vertical-align: middle;
    }
    #gift-icon:hover {
      transform: scale(1.17) rotate(-6deg);
      filter: brightness(1.15) drop-shadow(0 0 6px #ffe06699);
    }
    /* Countdown */
    .countdown-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: clamp(6px, 2vw, 12px);
      margin: 20px auto;
      max-width: 400px;
      z-index: 2;
    }
    .time-box {
      border: 2px solid #ff1493;
      border-radius: 12px;
      padding: clamp(6px, 2vw, 12px) clamp(8px, 3vw, 14px);
      display: flex;
      flex-direction: column;
      align-items: center;
      width: clamp(50px, 12vw, 70px);
      background-color: #ffe6f0;
      box-shadow: 0 2px 6px rgba(255, 20, 147, 0.3);
      box-sizing: border-box;
      user-select: none;
    }
    .time-box .number {
      font-size: clamp(1.4rem, 4vw, 2rem);
      font-weight: bold;
      color: #d6336c;
      line-height: 1.1;
    }
    .time-box .label {
      margin-top: 4px;
      font-size: clamp(0.7rem, 2vw, 0.9rem);
      color: #ff1493;
      font-weight: 600;
    }
    @media (max-width: 350px) {
      .countdown-container {
        gap: 6px;
        margin: 10px 0;
        justify-content: center;
      }
      .time-box {
        width: 45px;
        padding: 6px 8px;
        margin-bottom: 8px;
      }
      .time-box .number {
        font-size: 1.4rem;
      }
      .time-box .label {
        font-size: 0.7rem;
      }
      #gift-icon {
        width: 26px;
        height: 26px;
      }
    }
    /* N√∫t ch√∫c m·ª´ng */
    button {
      background-color: #ff66a3;
      border: none;
      color: white;
      padding: 12px 20px;
      font-size: 1.3rem;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 2px 2px 8px #999;
      transition: background-color 0.3s;
      z-index: 2;
      user-select: none;
    }
    button:hover {
      background-color: #ff3385;
    }
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    .bounce {
      animation: bounce 0.3s ease;
    }
    /* Popup ch√∫c m·ª´ng n√∫t */
    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff0f5;
      color: #d6336c;
      border: 2px solid #ff99cc;
      padding: 25px;
      border-radius: 20px;
      font-size: 1.8rem; /* font size l·ªõn */
      display: none;
      z-index: 2001;
      text-align: center;
      opacity: 0;
      min-width: 270px;
      max-width: 90vw;
      line-height: 1.5;
      box-sizing: border-box;
    }
    /* Popup qu√† */
    .popup-gift {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff0f5;
      color: #d6336c;
      border: 2px solid #ff99cc;
      padding: 25px;
      border-radius: 20px;
      font-size: 1.3rem;
      display: none;
      z-index: 2001;
      text-align: center;
      opacity: 0;
      min-width: 270px;
      max-width: 90vw;
      line-height: 1.5;
      box-sizing: border-box;
    }
    .popup.show, .popup-gift.show {
      display: block;
      animation: fadeIn 0.5s ease-out forwards;
    }
    .popup.hide, .popup-gift.hide {
      animation: fadeOut 0.5s ease-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }
    @keyframes fadeOut {
      from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      to { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    }
    /* Tim r∆°i */
    .heart {
      width: 20px;
      height: 20px;
      position: fixed;
      background: url('https://twemoji.maxcdn.com/v/latest/svg/2764.svg') no-repeat center;
      background-size: contain;
      animation: fall 2.5s linear forwards;
      z-index: 1000;
      pointer-events: none;
      top: -20px;
    }
    @keyframes fall {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(100vh); opacity: 0; }
    }
    /* Hoa r∆°i v·ªõi animation xoay */
    @keyframes flowerFall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
    .flower {
      position: fixed;
      pointer-events: none;
      user-select: none;
      animation: flowerFall 4.5s linear forwards;
      z-index: 1000;
      opacity: 0.82;
      will-change: transform, opacity;
    }
    /* Icon m√®o n·ªÅn */
    .cat-bg-icon {
      position: absolute;
      z-index: 1;
      width: 42px;
      height: 42px;
      opacity: 0.14;
      pointer-events: none;
      user-select: none;
      transition: transform 0.5s;
    }
  </style>
</head>
<body>
  <div class="title-container">
    <h1>Sinh nh·∫≠t Ho√†ng Linh (Sin)üéâüéÇ</h1>
    <div class="birthday-date-row">
      <p id="birthday-date">...</p>
      <img id="gift-icon" title="M·ªü qu√† sinh nh·∫≠t!" style="display:none;" 
           src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f381.svg" alt="Qu√† sinh nh·∫≠t" />
    </div>
  </div>

  <div id="countdown" class="countdown-container" aria-live="polite" aria-atomic="true">
    <div class="time-box"><div class="number" id="days">0</div><div class="label">Ng√†y</div></div>
    <div class="time-box"><div class="number" id="hours">0</div><div class="label">Gi·ªù</div></div>
    <div class="time-box"><div class="number" id="minutes">0</div><div class="label">Ph√∫t</div></div>
    <div class="time-box"><div class="number" id="seconds">0</div><div class="label">Gi√¢y</div></div>
  </div>

  <button id="btn-chucmung" aria-label="N√∫t ch√∫c m·ª´ng" onclick="showPopup()">Ch√∫c m·ª´ng üéâüéÇ</button>

  <div class="popup" id="popup">Ch√∫c m·ª´ng sinh nh·∫≠t Linhh üéâüéÇ</div>
  <div class="popup-gift" id="popup-gift">
    Ch√∫c m·ª´ng sinh nh·∫≠t Sinn!!! üéâüéÇ<br/>
    Bao ch√∫c Sinn tu·ªïi m·ªõi h·∫°nh ph√∫c, m·∫°nh kho·∫ª, h·ªçc gi·ªèi,<br/>
    ƒë·∫≠u nguy·ªán v·ªçng 1 v√†o nƒÉm sau, luonvuituoi,<br>
    s·ªë d∆∞ lu√¥n "ƒë·ªìng bi·∫øn", ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u ƒë·ªÅ ra,<br/>
    v√† c√≥ 1 ng√†y sinh nh·∫≠t th·∫≠t ƒë√°ng nh·ªõ nhaaaa!!!
  </div>

  <!-- Nh·∫°c n·ªÅn ng√†y 4/8 -->
  <audio id="birthdayMusic" 
         src="https://github.com/baobao247/0408/raw/refs/heads/main/tiramisu-cake-original-mix-128-ytshorts.savetube.me.mp3" 
         preload="auto"></audio>

  <!-- √Çm thanh b·∫•m n√∫t ng√†y th∆∞·ªùng (√¢m thanh c≈©) -->
  <audio id="clickSound" 
         src="https://github.com/baobao247/0408/raw/refs/heads/main/happy-birthday-to-you-bossa-nova-style-arrangement-21399.mp3" 
         preload="auto"></audio>

  <!-- √Çm thanh b·∫•m n√∫t ng√†y 4/8 (party horn) -->
  <audio id="birthdayClickSound" 
         src="https://github.com/baobao247/0408/raw/refs/heads/main/party-horn-sound-effect-128-ytshorts.savetube.me.mp3" 
         preload="auto"></audio>

  <!-- N√∫t b·∫≠t nh·∫°c n·∫øu tr√¨nh duy·ªát ch·∫∑n autoplay -->
  <button id="btn-play-music" style="display:none; position: fixed; bottom: 14px; right: 14px; z-index: 3000; padding: 8px 14px; background:#ff66a3; color:white; border:none; border-radius:12px; cursor:pointer; font-weight:bold;">B·∫≠t nh·∫°c üéµ</button>

<script>
  let testMode = false; // b·∫≠t true ƒë·ªÉ test ng√†y 4/8

  function getNow() {
    return testMode ? new Date(2025, 7, 4, 12, 0, 0) : new Date();
  }

  function getNextBirthdayTarget(now) {
    const currentYear = now.getFullYear();
    const birthdayStart = new Date(currentYear, 7, 4, 0, 0, 0);
    const birthdayEnd = new Date(currentYear, 7, 5, 0, 0, 0);

    if (now < birthdayStart) {
      return { target: birthdayStart, year: currentYear };
    } else if (now >= birthdayStart && now < birthdayEnd) {
      return null;
    } else {
      return { target: new Date(currentYear + 1, 7, 4, 0, 0, 0), year: currentYear + 1 };
    }
  }

  function isBirthdayDay() {
    const now = getNow();
    return now.getMonth() === 7 && now.getDate() === 4;
  }

  function updateCountdown() {
    const now = getNow();
    const ctn = document.getElementById("countdown");
    const birthdayDateElem = document.getElementById("birthday-date");
    const popup = document.getElementById("popup");
    const giftIcon = document.getElementById("gift-icon");
    const result = getNextBirthdayTarget(now);

    if (result === null) {
      ctn.style.display = "none";
      birthdayDateElem.textContent = `04/08/${now.getFullYear()}`;
      giftIcon.style.display = "inline-block";

      if (popup.classList.contains("show")) {
        popup.classList.remove("show");
        popup.classList.add("hide");
        setTimeout(() => { popup.style.display = "none"; }, 500);
      }
      return;
    }

    birthdayDateElem.textContent = `04/08/${result.year}`;
    ctn.style.display = "flex";
    giftIcon.style.display = "none";

    const diff = result.target - now;
    if (diff <= 0) {
      ["days", "hours", "minutes", "seconds"].forEach(id => {
        document.getElementById(id).textContent = 0;
      });
      return;
    }

    document.getElementById("days").textContent = Math.floor(diff / (1000 * 60 * 60 * 24));
    document.getElementById("hours").textContent = Math.floor((diff / (1000 * 60 * 60)) % 24);
    document.getElementById("minutes").textContent = Math.floor((diff / (1000 * 60)) % 60);
    document.getElementById("seconds").textContent = Math.floor((diff / 1000) % 60);
  }

  setInterval(updateCountdown, 1000);
  updateCountdown();

  let popupTimeout;
  let isShowing = false;

  function createHeart() {
    const heart = document.createElement("div");
    heart.classList.add("heart");
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.top = "-20px";
    heart.style.animationDuration = (2 + Math.random() * 2) + "s";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 3000);
  }

  function createFlower() {
    const flower = document.createElement("div");
    flower.textContent = "üå∏";
    flower.className = "flower";
    flower.style.left = Math.random() * 100 + "vw";
    flower.style.top = "-40px";
    flower.style.fontSize = (28 + Math.random() * 24) + "px";
    document.body.appendChild(flower);
    setTimeout(() => flower.remove(), 4600);
  }

  function startFlowerRain() {
    setInterval(createFlower, 300);
  }

  function createManyHearts(count = 100) {
    for (let i = 0; i < count; i++) {
      const delay = Math.random() * 2000;
      setTimeout(() => createHeart(), delay);
    }
  }

  function startHeartsRain() {
    if (!isBirthdayDay()) setInterval(createHeart, 100);
  }

  function autoplayBirthdayMusic() {
    const music = document.getElementById("birthdayMusic");
    if (!music) return;

    music.loop = true;

    music.currentTime = 0;
    const playPromise = music.play();

    if (playPromise !== undefined) {
      playPromise.then(() => {
        const btnPlay = document.getElementById("btn-play-music");
        if (btnPlay) btnPlay.style.display = "none";
      }).catch(() => {
        const btnPlay = document.getElementById("btn-play-music");
        if (btnPlay) {
          btnPlay.style.display = "block";
          btnPlay.onclick = () => {
            music.play();
            btnPlay.style.display = "none";
          }
        }
      });
    }
  }

  function showPopup() {
    const popup = document.getElementById("popup");
    const button = document.getElementById("btn-chucmung");
    const clickSoundNormal = document.getElementById("clickSound");
    const clickSoundBirthday = document.getElementById("birthdayClickSound");

    if (isBirthdayDay()) {
      for(let i=0; i<100; i++) setTimeout(createFlower, Math.random() * 2000);
      if (clickSoundBirthday && clickSoundBirthday.paused) {
        clickSoundBirthday.currentTime = 0;
        clickSoundBirthday.play();
      }
    } else {
      createManyHearts(100);
      if (clickSoundNormal && clickSoundNormal.paused) {
        clickSoundNormal.currentTime = 0;
        clickSoundNormal.play();
      }
    }

    if (!isShowing) {
      popup.classList.remove("hide");
      popup.classList.add("show");
      isShowing = true;
    }

    clearTimeout(popupTimeout);
    popupTimeout = setTimeout(() => {
      popup.classList.remove("show");
      popup.classList.add("hide");
      isShowing = false;
      setTimeout(() => {
        if (!isShowing) popup.style.display = "none";
      }, 500);
    }, 5000);

    popup.style.display = "block";

    button.classList.add("bounce");
    button.addEventListener("animationend", () => {
      button.classList.remove("bounce");
    }, { once: true });
  }

  function showGiftPopup() {
    const popup = document.getElementById("popup-gift");
    if (!popup) return;
    popup.classList.remove("hide");
    popup.classList.add("show");
    popup.style.display = "block";
    setTimeout(() => {
      popup.classList.remove("show");
      popup.classList.add("hide");
      setTimeout(() => { popup.style.display = "none"; }, 500);
    }, 9900);
  }

  window.addEventListener('DOMContentLoaded', () => {
    const giftIcon = document.getElementById("gift-icon");

    if (isBirthdayDay()) {
      autoplayBirthdayMusic();
      if (giftIcon) {
        giftIcon.style.display = "inline-block";
        giftIcon.addEventListener("click", showGiftPopup);
      }
      startFlowerRain();
    } else {
      giftIcon.style.display = "none";
      startHeartsRain();
    }

    // Icon m√®o n·ªÅn
    function addCatIconsToBackground(count = 32) {
      document.querySelectorAll('.cat-bg-icon').forEach(e => e.remove());
      const body = document.body;
      const { innerWidth: ww, innerHeight: wh } = window;
      for (let i = 0; i < count; i++) {
        const cat = document.createElement('img');
        cat.className = 'cat-bg-icon';
        cat.src = 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f431.svg';
        cat.style.left = Math.random() * (ww - 48) + 'px';
        cat.style.top = Math.random() * (wh - 48) + 'px';
        cat.style.transform = `rotate(${Math.random() * 60 - 30}deg)`;
        body.appendChild(cat);
      }
    }

    addCatIconsToBackground();
    window.addEventListener('resize', () => addCatIconsToBackground(32));
  });
</script>
</body>
  </html>
                          
